# Начало работы

Проект разнесён на два репозитория:

- [AuroraLauncher](https://github.com/AuroraTeam/AuroraLauncher) - LauncherServer на котором будет размещаться игровые файлы и осуществляется подключение службы авторизации

- [Launcher](https://github.com/AuroraTeam/Launcher) - Сам Launcher через который будет осуществляться запуск игры

Настройка этих двух частей происходит отдельно друг от друга так что начнём с LauncherServer частью проекта.
## Установка и настройка

После того, как вы скачали [LauncherServer](https://github.com/AuroraTeam/AuroraLauncher/releases), расположите его в любой папке и запустите его.
Сервер создаст конфигурационный файл и после чего выключится.
После чего вы можете произвести его настройку.
Все настройки хранятся в файле `LauncherServerConfig.hjson`.
Ниже будет представлен его пример с описанием всех настроек.

```hjson
{
    configVersion: 0 
    projectID: c83f8c24-6207-45ce-8df4-671f2cb9e137
    projectName: ""
    lang: ru 
    branch: stable 
    env: dev 
    mirrors: [] 
    auth:
    {
        type: accept
    }
    api:
    {
        addresses:
        {
            web: http://localhost:1370/
            websocket: ws://localhost:1370/ws
        }
        host: 0.0.0.0
        port: 1370
        useSSL: false
        ssl:
        {
            cert: /path/to/cert.pem
            key: /path/to/key.pem
        }
        disableListing: false
        hideListing: false
        injector:
        {
            skinDomains: []
        }
    }
}

```

##### Описание настроек конфига

`configVersion` - версия формата текущего конфига, на данный момент не используется  
`projectID` - уникальный ID проекта, генерируется при первом запуске и используется в некоторых местах в коде лаунчера/лаунчсервера
`projectName` - Имя проекта  
`lang` - язык, используемый для вывода информации в лаунчсервере. Возможные на данный момент варианты `ru` и `en` для русского и англиского языков соответственно  
`env` - режим работы лаунчсервера. Возможные варианты: prod, debug и dev. На данный момент не используется  
`mirrors` - список зеркал, для скачивания файлов игры. Для получения подробной информации смотрите раздел [Загрузка клиентов](clients.md)  
`auth` - блок настроек методов авторизации и получения скинов, подробнее в разделе [Настройка авторизации](auth.md)  
`api` - блок настроек подключения к лаунчсерверу. Содержит следующие настройки:

- `addresses` - Список внешних адресов, по которым лаунчсервер будет доступен из интернета
- - `web` - Адрес по которому будет доступен сервер отдачи файлов и взаимодействия с authlib инжектором
- - `websocket` - Адрес по которому будет доступен сервер взаимодействия с лаунчерами
- `ip` - внутренный IP, с которого лаунчсервер будет слушать запросы. Не трогать, если не знаете что это и как работает
- `port` - порт, который будет слушать лаунчсервер. Аналогично предыдущему пункту
- `enableListing` - Включить отдачу папок и файлов силами лаунчсервера, рекомендуеся отключать при проксировании файлов, например через Nginx
- `hideListing` - Отключить вывод списка папок и файлов, не работает если `enableListing` установлен в начении `true`
- `useSSL` - Использовать SSL сертификат для сервера. При использовании сертификата не забудьте поменять в `address` url с `ws` на `wss`
- `ssl` - пути для используемых файлов сертификата в PEM формате. Можно указывать как абсолютный так и относительный (из директории в которой был запущен лаунчсервер) путь до файлов. Подробнее о параметрах [cert и key](https://nodejs.org/api/tls.html#tls_tls_createsecurecontext_options)
- `skinDomains` - Список адресов для загрузки скинов

Для работы с защищённым подключением с использованием SSL сертификата рекомендуется вместо настройки `ssl` в лаунчсервере использовать проксирование сервера через Nginx. Данный подход позволяет более удобно настраивать подключение (например с использованием автоматизированных скриптов certbot-a), а также переложить часть нагрузки с Node.js сервера на Nginx.
